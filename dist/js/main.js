const data=[{name:"Ioan",password:"123qwe",age:18,email:"pppp@gmail.com",phone:11223344,card:"1234",id:1},{name:"Foma",password:"456qwe",age:19,email:"cccc@gmail.com",phone:22334455,card:"5678",id:2},{name:"Lyka",password:"789qwe",age:20,email:"dddd@gmail.com",phone:66778899,card:"5678",id:3},{name:"Gavrilo",password:"0123qwe",age:21,email:"ffff@gmail.com",phone:11223300,card:"9012",id:4}];function validateInputValues(e){var{name:e,age:t,email:r,password:s,phone:a,card:n}=e,e=/^[A-Za-z.\s_-]{3,20}$/.test(e),o=/^\d+$/,t=o.test(t),o=o.test(a);return{name:e,age:t,email:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(r),password:/^[a-zA-Z0-9]{8,}$/.test(s),phone:o,card:/0*[1-9]\d{15,}/.test(n)}}const users=document.querySelector(".users"),userData=document.querySelector(".userData"),usersList=null===localStorage.getItem("users")||void 0===localStorage.getItem("users")||0===JSON.parse(localStorage.getItem("users")).length?data:JSON.parse(localStorage.getItem("users")),removeErrorMessages=()=>{document.querySelector(".errorMessageName").textContent="",document.querySelector(".errorMessageAge").textContent="",document.querySelector(".errorMessageEmail").textContent="",document.querySelector(".errorMessagePassword").textContent="",document.querySelector(".errorMessagePhone").textContent="",document.querySelector(".errorMessageCard").textContent=""},renderUsers=()=>{for(let o=0;o<usersList.length;o++){const t=document.createElement("div"),r=document.createElement("button"),s=document.createElement("button"),a=document.createElement("button"),d=document.querySelector(".saveButton");var e=document.querySelector(".newUser");t.innerHTML=usersList[o].name,s.innerHTML="Edit",r.innerHTML="View",a.innerHTML="Delete",users.appendChild(t),users.appendChild(s),users.appendChild(r),users.appendChild(a);const n=a=>{const n=document.querySelector(".editBlock");switch(a){case"edit":removeErrorMessages(),document.getElementById("name").value=usersList[o].name,document.getElementById("age").value=usersList[o].age,document.getElementById("email").value=usersList[o].email,document.getElementById("password").value=usersList[o].password,document.getElementById("phone").value=usersList[o].phone,document.getElementById("card").value=usersList[o].card;break;case"create":removeErrorMessages(),document.getElementById("name").value="",document.getElementById("age").value="",document.getElementById("email").value="",document.getElementById("password").value="",document.getElementById("phone").value="",document.getElementById("card").value=""}n.style.display="block",d.addEventListener("click",()=>{event.preventDefault();e=usersList.map(e=>e.id);var e=Math.max(...e)+1,t=document.querySelector('form[name="editUserForm"]').elements,r={name:t.name.value,age:t.age.value,email:t.email.value,password:t.password.value,phone:t.phone.value,card:t.card.value,id:"edit"===a?usersList[o].id:e},t=validateInputValues(r);if(t.name&&t.age&&t.email&&t.password&&t.phone&&t.card){switch(a){case"edit":var s=usersList.findIndex(e=>e.id===usersList[o].id),s=(usersList[s]=r,JSON.stringify(usersList));localStorage.setItem("users",s);break;case"create":s=[...usersList,r],s=JSON.stringify(s);localStorage.setItem("users",s)}n.style.display="none",location.reload()}else t.name?document.querySelector(".errorMessageName").textContent="":document.querySelector(".errorMessageName").textContent="The name must be at least 3 characters and not more than 20",t.age?document.querySelector(".errorMessageAge").textContent="":document.querySelector(".errorMessageAge").textContent="Numbers only",t.email?document.querySelector(".errorMessageEmail").textContent="":document.querySelector(".errorMessageEmail").textContent="example@example.com",t.password?document.querySelector(".errorMessagePassword").textContent="":document.querySelector(".errorMessagePassword").textContent="Should be not less then 8 characters",t.phone?document.querySelector(".errorMessagePhone").textContent="":document.querySelector(".errorMessagePhone").textContent="Numbers only",t.card?document.querySelector(".errorMessageCard").textContent="":document.querySelector(".errorMessageCard").textContent="Should be not less then 16 numbers"})},l=()=>{users.appendChild(t),users.appendChild(s),users.appendChild(r),users.appendChild(a);var e=usersList.filter(e=>e.id!==usersList[o].id),e=JSON.stringify(e);localStorage.setItem("users",e),location.reload()};r.addEventListener("click",()=>{var e=document.createElement("div");e.innerHTML=`<div>
                    <div>Name: ${usersList[o].name}</div>
                    <div>Age: ${usersList[o].age}</div>
                    <div>Email: ${usersList[o].email}</div>
                    <div>Password: ${usersList[o].password}</div>
                    <div>Phone: ${usersList[o].phone}</div>
                    <div>Card: ${usersList[o].card}</div>
                </div>`,userData.innerHTML="",userData.appendChild(e)}),s.addEventListener("click",()=>{n("edit")}),a.addEventListener("click",()=>{const e=document.querySelector(".shadow");e.style.display="flex",document.querySelector(".removeItem").addEventListener("click",l),document.querySelector(".skipRemoveItem").addEventListener("click",()=>{e.style.display="none"}),e.addEventListener("click",()=>{e.style.display="none"}),document.querySelector(".modal").addEventListener("click",()=>{event.stopPropagation()})}),e.addEventListener("click",()=>{n("create")})}};renderUsers();